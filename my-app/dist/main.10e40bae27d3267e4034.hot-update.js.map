{"version":3,"file":"main.10e40bae27d3267e4034.hot-update.js","sources":["/Users/eleme/Desktop/workspace/FasterHosts/my-app/src/popup/components/Editor/index.tsx"],"sourcesContent":["import { useRef, useEffect } from 'react';\n\nimport CodeMirror from 'codemirror'\nimport 'codemirror/addon/comment/comment'\nimport 'codemirror/addon/selection/mark-selection'\nimport 'codemirror/lib/codemirror.css'\n\nimport customHostsMode from './customHostsMode'\n\nimport './style.css';\n\ncustomHostsMode()\n\ninterface EditorProps {\n  readOnly?: boolean;\n  content?: string;\n  onChange?: (value?: string) => void;\n}\n\nconst Editor: React.FC<EditorProps> = (props) => {\n  const { readOnly, content, onChange } = props\n\n  const ref = useRef<HTMLTextAreaElement>(null)\n  const editorRef = useRef<CodeMirror.EditorFromTextArea | null>(null)\n\n  useEffect(() => {\n    if (!ref.current) return\n\n    let editor = CodeMirror.fromTextArea(ref.current, {\n      lineNumbers: true,\n      readOnly,\n      // 自定义 mode\n      mode: 'hosts',\n    })\n\n    editorRef.current = editor\n\n    editor.setSize('100%', '100%')\n\n    editor.on('change', (editor) => {\n      const value = editor.getDoc().getValue()\n      onChange?.(value)\n    })\n  }, []);\n\n  useEffect(() => {\n    if (!editorRef.current) return\n\n    editorRef.current.setOption('readOnly', readOnly)\n  }, [readOnly])\n\n  useEffect(() => {\n    editorRef.current?.setValue(content || '')\n  }, [content])\n\n  return (\n    <div className=\"hosts_editor\">\n      <textarea className=\"hosts_editor_textarea\" ref={ref}></textarea>\n    </div>\n  );\n}\n\nexport default Editor;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AAEA;AAEA;;AAEA;AACA;AAOA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAJA;AAOA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AA1CA;AACA;AADA;AA2CA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}