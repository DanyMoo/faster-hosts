{"version":3,"file":"main.46c9dde29a954a92c0ed.hot-update.js","sources":["/Users/eleme/Desktop/workspace/FasterHosts/my-app/src/popup/App.tsx"],"sourcesContent":["import { useState, useEffect, useMemo } from 'react';\nimport { Drawer } from 'antd';\n\nimport Editor from './components/Editor'\nimport Header from './components/Header'\nimport SideMenu, { MenuItem } from './components/SideMenu'\nimport HostsForm, { Hosts, HostsTypeEnum, UpdateHostsIntervalEnum } from './components/HostsForm'\n\nimport './App.css';\nimport useStorage from './hooks/useStorage';\nimport { USING_HOSTS_ID, ACTIVE_HOSTS_ID, HOSTS } from '../const';\n\nconst operateTypeName = {\n  add: '添加 Hosts',\n  edit: '编辑 Hosts',\n}\n\nfunction App() {\n  const [operateType, setOperateType] = useState<'add' | 'edit'>('add')\n  const [visible, setVisible] = useState(false)\n  const [content, setContent] = useState('')\n\n  const { storage } = useStorage<Record<string, Hosts>>(HOSTS)\n  const { storage: usingHostsId } = useStorage(USING_HOSTS_ID)\n  const { storage: activeHostsId } = useStorage(ACTIVE_HOSTS_ID)\n\n  const sideMenuList = useMemo(() => {\n    return Object.keys(storage).map(id => {\n      return {\n        id,\n        title: storage[id]?.title\n      }\n    })\n  }, [storage])\n\n  const activeHosts = useMemo(() => {\n    return storage[activeHostsId || usingHostsId] as Hosts | undefined\n  }, [storage, usingHostsId, activeHostsId])\n\n  const handleAdd = () => {\n    setOperateType('add')\n    setVisible(true)\n  }\n\n  const handleEdit = (item?: MenuItem) => {\n    chrome.storage.sync.set({ [ACTIVE_HOSTS_ID]: item?.id })\n    setOperateType('edit')\n    setVisible(true)\n  }\n\n  const handleChange = (item: MenuItem) => {\n    chrome.storage.sync.set({ [ACTIVE_HOSTS_ID]: item?.id })\n  }\n\n  const readOnly = activeHosts?.hostsType === HostsTypeEnum.REMOTE\n\n  return (\n    <div className=\"faster_hosts\" id=\"faster_hosts\">\n      <Header readOnly={readOnly} title={activeHosts?.title} onAdd={handleAdd}></Header>\n      <div className=\"faster_hosts_body\">\n        <SideMenu id={activeHostsId || usingHostsId} onEditor={handleEdit} onChange={handleChange} list={sideMenuList} />\n        <Editor onChange={(r) => console.log(r)} content={activeHosts?.content} readOnly={readOnly} />\n      </div>\n\n      <Drawer\n        placement=\"right\"\n        closable={false}\n        visible={visible}\n        onClose={() => setVisible(false)}\n        width=\"80%\"\n        getContainer=\"#faster_hosts\"\n        style={{ position: 'absolute' }}\n      >\n        <h3>{operateTypeName[operateType]}</h3>\n        <HostsForm\n          id={activeHostsId || usingHostsId}\n          type={operateType}\n          title={activeHosts?.title}\n          hostsType={activeHosts?.hostsType}\n          remoteUrl={activeHosts?.remoteUrl}\n          updateHostsInterval={activeHosts?.updateHostsInterval}\n        >\n        </HostsForm>\n      </Drawer>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;;AAEA;AACA;AACA;AAFA;AACA;AAIA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAPA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAVA;AAAA;AAAA;AAAA;AAAA;AAPA;AAAA;AAAA;AAAA;AAAA;AA6BA;AACA;AAtEA;AAKA;;;AALA;AAuEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}